:github-icon: pass:[<svg class="icon"><use href="#github-icon"/></svg>]
:eip721: https://eips.ethereum.org/EIPS/eip-721[EIP721]
:erc721-receiver: xref:/erc721.adoc#receiving_tokens[ERC721Receiver]

= ERC721

Reference of interfaces, presets, and utilities related to ERC721 contracts.

TIP: For an overview of ERC721, read our xref:erc721.adoc[ERC721 guide].

== Core

[.contract]
[[IERC721]]
=== `++IERC721++` link:https://github.com/OpenZeppelin/cairo-contracts/blob/cairo-2/src/token/erc721/interface.cairo#L13-L31[{github-icon},role=heading-link]

[.hljs-theme-light.nopadding]
```javascript
use openzeppelin::token::erc721::interface::IERC721;
```
Interface of the IERC721 standard as defined in {eip721}.

[.contract-index]
.Functions
--
* xref:#IERC721-balance_of[`++balance_of(account)++`]
* xref:#IERC721-owner_of[`++owner_of(token_id)++`]
* xref:#IERC721-transfer_from[`++transfer_from(from, to, token_id)++`]
* xref:#IERC721-safe_transfer_from[`++safe_transfer_from(from, to, token_id, data)++`]
* xref:#IERC721-approve[`++approve(to, token_id)++`]
* xref:#IERC721-set_approval_for_all[`++set_approval_for_all(operator, approved)++`]
* xref:#IERC721-get_approved[`++get_approved(token_id)++`]
* xref:#IERC721-is_approved_for_all[`++is_approved_for_all(owner, operator)++`]

[.contract-subindex-inherited]
.ISRC5

* xref:#IERC721-supports_interface[`++supports_interface(interface_id)++`]
--

[.contract-index]
.Events
--
* xref:#IERC721-Approval[`++Approval(owner, approved, token_id)++`]
* xref:#IERC721-ApprovalForAll[`++ApprovalForAll(owner, operator, approved)++`]
* xref:#IERC721-Transfer[`++Transfer(from, to, token_id)++`]
--

[.contract-item]
[[IERC721-balance_of]]
==== `[.contract-item-name]#++balance_of++#++(account: ContractAddress) → u256++` [.item-kind]#external#

Returns the number of NFTs owned by `account`.

[.contract-item]
[[IERC721-owner_of]]
==== `[.contract-item-name]#++owner_of++#++(token_id: u256) → ContractAddress++` [.item-kind]#external#

Returns the owner address of `token_id`.

This function panics if:

- `token_id` does not exist.

[.contract-item]
[[IERC721-transfer_from]]
==== `[.contract-item-name]#++transfer_from++#++(from: ContractAddress, to: ContractAddress, token_id: u256)++` [.item-kind]#external#

Transfer ownership of `token_id` from `from` to `to`.
    
Note that the caller is responsible to confirm that the recipient is capable of receiving ERC721 transfers or else they may be permanently lost.
Usage of <<IERC721-safe_transfer_from,safe_transfer_from>> prevents loss, though the caller must understand this adds an external call which potentially creates a reentrancy vulnerability.
    
Emits a <<IERC721-Transfer,Transfer>> event.

This function panics if:

- Caller is neither approved nor the `token_id` owner.
- `to` is the zero address.
- `from` is not the token owner.
- `token_id` does not exist.

[.contract-item]
[[IERC721-safe_transfer_from]]
==== `[.contract-item-name]#++safe_transfer_from++#++(from: ContractAddress, to: ContractAddress, token_id: u256, data: Span<felt252>)++` [.item-kind]#external#

Safely transfer ownership of `token_id` from `from` to `to`, checking first
that `to` is aware of the ERC721 protocol to prevent tokens being locked
forever. For information regarding how contracts communicate their
awareness of the ERC721 protocol, see {erc721-receiver}.
    
Emits a <<IERC721-Transfer,Transfer>> event.

This function panics if:

- Caller is neither approved nor the `token_id` owner.
- `to` is the zero address.
- `from` is not the token owner.
- `token_id` does not exist.
- `to` neither is an account contract nor supports the IERC721Receiver interface.

[.contract-item]
[[IERC721-approve]]
==== `[.contract-item-name]#++approve++#++(to: ContractAddress, token_id: u256)++` [.item-kind]#external#

Change or reaffirm the approved address for an NFT.

Emits an <<IERC721-Approval,Approval>> event.

This function panics if:

- Caller is neither an approved operator nor the `token_id` owner.
- `to` is either the `owner` or the zero address.
- `token_id` does not exist.

[.contract-item]
[[IERC721-set_approval_for_all]]
==== `[.contract-item-name]#++set_approval_for_all++#++(operator: ContractAddress, approved: bool)++` [.item-kind]#external#

Enable or disable approval for `operator` to manage all of the caller's assets.

Emits an <<IERC721-Approval,Approval>> event.

This function panics if:

- `owner` is the `operator`.

[.contract-item]
[[IERC721-get_approved]]
==== `[.contract-item-name]#++get_approved++#++(token_id: u256) -> u256++` [.item-kind]#external#

Returns the address approved for `token_id`.

This function panics if:

- `token_id` does not exist.

[.contract-item]
[[IERC721-is_approved_for_all]]
==== `[.contract-item-name]#++is_approved_for_all++#++(owner: ContractAddress, operator: ContractAddress) -> bool++` [.item-kind]#external#

Query if `operator` is an authorized operator for `owner`.

[.contract-item]
[[IERC721-Approval]]
==== `[.contract-item-name]#++Approval++#++(owner: ContractAddress, approved: ContractAddress, token_id: u256)++` [.item-kind]#event#

Emitted when `owner` enables `approved` to manage the `token_id` token.

[.contract-item]
[[IERC721-ApprovalForAll]]
==== `[.contract-item-name]#++ApprovalForAll++#++(owner: ContractAddress, operator: ContractAddress, approved: bool)++` [.item-kind]#event#

Emitted when `owner` enables `approved` to manage the `token_id` token.

[.contract-item]
[[IERC721-Transfer]]
==== `[.contract-item-name]#++Transfer++#++(from: ContractAddress, to: ContractAddress, token_id: u256)++` [.item-kind]#event#

Emitted when `token_id` token is transferred from `from` to `to`.

[.contract]
[[IERC721Metadata]]
=== `++IERC721Metadata++` link:https://github.com/OpenZeppelin/cairo-contracts/blob/cairo-2/src/token/erc721/interface.cairo#L54-L59[{github-icon},role=heading-link]

[.hljs-theme-light.nopadding]
```javascript
use openzeppelin::token::erc721::interface::IERC721Metadata;
```

See {eip721}.

[.contract-index]
.Functions
--
* xref:#IERC721Metadata-name[`++name()++`]
* xref:#IERC721Metadata-owner_of[`++symbol()++`]
* xref:#IERC721Metadata-token_uri[`++token_uri(token_id)++`]

[.contract-subindex-inherited]
.IERC721

* xref:#IERC721-balance_of[`++balance_of(account)++`]
* xref:#IERC721-owner_of[`++owner_of(token_id)++`]
* xref:#IERC721-transfer_from[`++transfer_from(from, to, token_id)++`]
* xref:#IERC721-safe_transfer_from[`++safe_transfer_from(from, to, token_id, data)++`]
* xref:#IERC721-approve[`++approve(to, token_id)++`]
* xref:#IERC721-set_approval_for_all[`++set_approval_for_all(operator, approved)++`]
* xref:#IERC721-get_approved[`++get_approved(token_id)++`]
* xref:#IERC721-is_approved_for_all[`++is_approved_for_all(owner, operator)++`]

[.contract-subindex-inherited]
.ISRC5

* xref:#IERC721-supports_interface[`++supports_interface(interface_id)++`]
--

[.contract-index]
.Events
--
[.contract-subindex-inherited]
.IERC721

* xref:#IERC721-Approval[`++Approval(owner, approved, token_id)++`]
* xref:#IERC721-ApprovalForAll[`++ApprovalForAll(owner, operator, approved)++`]
* xref:#IERC721-Transfer[`++Transfer(from, to, token_id)++`]
--

[.contract-item]
[[IERC721Metadata-name]]
==== `[.contract-item-name]#++name++#++() -> felt252++` [.item-kind]#external#

Returns the NFT name.

[.contract-item]
[[IERC721Metadata-symbol]]
==== `[.contract-item-name]#++symbol++#++() -> felt252++` [.item-kind]#external#

Returns the NFT ticker symbol.

[.contract-item]
[[IERC721Metadata-token_uri]]
==== `[.contract-item-name]#++token_uri++#++(token_id: u256) -> felt252++` [.item-kind]#external#

Returns the Uniform Resource Identifier (URI) as a short string for the `token_id` token.
If the URI is not set for `token_id`, the return value will be `0`.

[.contract]
[[ERC721]]
=== `++ERC721++` link:https://github.com/OpenZeppelin/cairo-contracts/blob/cairo-2/src/token/erc721/erc721.cairo#L7[{github-icon},role=heading-link]

[.hljs-theme-light.nopadding]
```javascript
use openzeppelin::token::erc721::ERC721;
```

Implementation of ERC721 which includes the IERC721Metadata extension as specified in https://eips.ethereum.org/EIPS/eip-721[EIP-721].

[.contract-index]
.Functions
--
* xref:#ERC721-constructor[`++constructor(self, name, symbol)++`]

[.contract-subindex-inherited]
.IERC721Metadata

* xref:#IERC721Metadata-name[`++name(self)++`]
* xref:#IERC721Metadata-symbol[`++symbol(self)++`]
* xref:#IERC721Metadata-token_uri[`++token_uri(self, token_id)++`]

[.contract-subindex-inherited]
.IERC721

* xref:#IERC721-balance_of[`++balance_of(self, account)++`]
* xref:#IERC721-owner_of[`++owner_of(self, token_id)++`]
* xref:#IERC721-transfer_from[`++transfer_from(self, from, to, token_id)++`]
* xref:#IERC721-safe_transfer_from[`++safe_transfer_from(self, from, to, token_id, data)++`]
* xref:#IERC721-approve[`++approve(self, to, token_id)++`]
* xref:#IERC721-set_approval_for_all[`++set_approval_for_all(self, operator, approved)++`]
* xref:#IERC721-get_approved[`++get_approved(self, token_id)++`]
* xref:#IERC721-is_approved_for_all[`++is_approved_for_all(self, owner, operator)++`]

[.contract-subindex-inherited]
.ISRC5

* xref:#ISRC5-supports_interface[`++supports_interface(self, interface_id)++`]

[.contract-subindex-inherited]
.InternalImpl

* xref:#ERC721-initializer[`++initializer(self, name_, symbol_)++`]
* xref:#ERC721-_owner_of[`++_owner_of(self, token_id)++`]
* xref:#ERC721-_exists[`++_exists(self, token_id)++`]
* xref:#ERC721-_is_approved_or_owner[`++_is_approved_or_owner(self, spender, token_id)++`]
* xref:#ERC721-_approve[`++_approve(self, to, token_id)++`]
* xref:#ERC721-_set_approval_for_all[`++_set_approval_for_all(self, owner, operator, approved)++`]
* xref:#ERC721-_mint[`++_mint(self, to, token_id)++`]
* xref:#ERC721-_transfer[`++_transfer(self, from, to, token_id)++`]
* xref:#ERC721-_burn[`++_burn(self, token_id)++`]
* xref:#ERC721-_safe_mint[`++_safe_mint(self, to, token_id, data)++`]
* xref:#ERC721-_safe_transfer[`++_safe_transfer(self, from, to, token_id, data)++`]
* xref:#ERC721-_set_token_uri[`++_set_token_uri(self, token_id, token_uri)++`]
--

[.contract-index]
.Events
--
[.contract-subindex-inherited]
.IERC721

* xref:#IERC721-Approval[`++Approval(owner, approved, token_id)++`]
* xref:#IERC721-ApprovalForAll[`++ApprovalForAll(owner, operator, approved)++`]
* xref:#IERC721-Transfer[`++Transfer(from, to, token_id)++`]
--

[.contract-item]
[[ERC721-constructor]]
==== `[.contract-item-name]#++constructor++#++(ref self: ContractState, name: felt252, symbol: felt252)++` [.item-kind]#constructor#

Initializes the state of the ERC721 contract by setting the token name and symbol.
The constructor also registers the IERC721_ID and IERC721_METADATA_ID interface ids according to SRC-5.

[.contract-item]
[[ERC721-initializer]]
==== `[.contract-item-name]#++initializer++#++(ref self: ContractState, name_: felt252, symbol_: felt252)++` [.item-kind]#internal#

Initializes the contract by setting the token name and symbol.
This should be used inside the contract's constructor.

[.contract-item]
[[ERC721-_owner_of]]
==== `[.contract-item-name]#++_owner_of++#++(self: @ContractState, token_id: felt252) -> ContractAddress++` [.item-kind]#internal#

Internal function that returns the owner address of `token_id`.
This function will panic if the token does not exist.

[.contract-item]
[[ERC721-_exists]]
==== `[.contract-item-name]#++_exists++#++(self: @ContractState, token_id: u256) -> bool++` [.item-kind]#internal#

Internal function that returns whether `token_id` exists.

Tokens start existing when they are minted (<<ERC721-_mint,_mint>>), and stop existing when they are burned (<<ERC721-_burn,_burn>>).

[.contract-item]
[[ERC721-_is_approved_or_owner]]
==== `[.contract-item-name]#++_is_approved_or_owner++#++(ref self: ContractState, spender: ContractAddress, token_id: u256) -> bool++` [.item-kind]#internal#

Internal function that returns whether `spender` is allowed to manage `token_id`.

This function panics if:

- `token_id` does not exist.

[.contract-item]
[[ERC721-_approve]]
==== `[.contract-item-name]#++_approve++#++(ref self: ContractState, to: ContractAddress, token_id: u256)++` [.item-kind]#internal#

Internal function that changes or reaffirms the approved address for an NFT.

Emits an <<IERC721-Approval,Approval>> event.

This function panics if:

- `token_id` does not exist.
- `to` is the current token owner.

[.contract-item]
[[ERC721-_set_approval_for_all]]
==== `[.contract-item-name]#++_set_approval_for_all++#++(ref self: ContractState, owner: ContractAddress, operator: ContractAddress, approved: bool)++` [.item-kind]#internal#

Internal function that enables or disables approval for `operator` to manage all of the
`owner` assets.

Emits an <<IERC721-Approval,Approval>> event.

This function panics if:

-`owner` is the `operator`.

[.contract-item]
[[ERC721-_mint]]
==== `[.contract-item-name]#++_mint++#++(ref self: ContractState, to: ContractAddress, token_id: u256)++` [.item-kind]#internal#

WARNING: Usage of this method is discouraged, use <<IERC721-_safe_mint,_safe_mint>> whenever possible.

Internal function that mints `token_id` and transfers it to `to`.

Emits an <<IERC721-Transfer,Transfer>> event.

This function panics if:

- `to` is the zero address.
- `token_id` already exists.

[.contract-item]
[[ERC721-_transfer]]
==== `[.contract-item-name]#++_transfer++#++(ref self: ContractState, from: ContractAddress, to: ContractAddress, token_id: u256)++` [.item-kind]#internal#

Internal function that transfers `token_id` from `from` to `to`.

Emits an <<IERC721-Transfer,Transfer>> event.

This function panics if:

- `to` is the zero address.
- `from` is not the token owner.
- `token_id` does not exist.

[.contract-item]
[[ERC721-_burn]]
==== `[.contract-item-name]#++_burn++#++(ref self: ContractState, token_id: u256)++` [.item-kind]#internal#

Internal function that destroys `token_id`.
The approval is cleared when the token is burned.
This internal function does not check if the sender is authorized to operate on the token.

Emits an <<IERC721-Transfer,Transfer>> event.

This function panics if:

- `token_id` does not exist.

[.contract-item]
[[ERC721-_safe_mint]]
==== `[.contract-item-name]#++_safe_mint++#++(ref self: ContractState, to: ContractAddress, token_id: u256, data: Span<felt252>)++` [.item-kind]#internal#

Internal function that safely mints `token_id` and transfers it to `to`.
If `to` is not an account contract, `to` must support IERC721Receiver; otherwise, the transaction will fail.

Emits an <<IERC721-Transfer,Transfer>> event.

This function panics if:

- `token_id` does not exist.
- `to` neither is an account contract nor supports the IERC721Receiver interface.

[.contract-item]
[[ERC721-_safe_transfer]]
==== `[.contract-item-name]#++_safe_transfer++#++(ref self: ContractState, from: ContractAddress, to: ContractAddress, token_id: u256, data: Span<felt252>)++` [.item-kind]#internal#

Internal function that safely transfers `token_id` token from `from` to `to`, checking first that contract recipients are aware of the ERC721 protocol to prevent tokens from being forever locked.

`data` is additional data, it has no specified format and it is sent in call to `to`.

This function is equivalent to `safe_transfer_from`, and can be used to e.g. implement alternative mechanisms to perform signature-based token transfers.

Emits an <<IERC721-Transfer,Transfer>> event.

This function panics if:

- `to` is the zero address.
- `from` is not the token owner.
- `token_id` does not exist.
- `to` neither is an account contract nor supports the IERC721Receiver interface.

* xref:#ERC721-_set_token_uri[`++_set_token_uri(self, token_id, token_uri)++`]

[.contract-item]
[[ERC721-_set_token_uri]]
==== `[.contract-item-name]#++_set_token_uri++#++(ref self: ContractState, token_id: u256, token_uri: felt252)++` [.item-kind]#internal#

Sets the `token_uri` of `token_id`.

This function panics if:

- `token_id` does not exist.

[.contract]
[[IERC721Receiver]]
=== `++IERC721Receiver++` link:https://github.com/OpenZeppelin/cairo-contracts/blob/cairo-2/src/token/erc721/interface.cairo#L70-L79[{github-icon},role=heading-link]

[.hljs-theme-light.nopadding]
```javascript
use openzeppelin::token::erc721::interface::IERC721Receiver;
```

[.contract-index]
.Functions
--
* xref:#ERC721Receiver-on_erc721_received[`++on_erc721_received(operator, from, token_id, data)++`]
--

[.contract-item]
[[ERC721Receiver-on_erc721_received]]
==== `[.contract-item-name]#++on_erc721_received++#++(operator: ContractAddress, from: ContractAddress, token_id: u256, data Span<felt252>)++` [.item-kind]#external#

Whenever an IERC721 `token_id` token is transferred to this non-account contract via <<IERC721.safe_transfer_from,IERC721.safe_transfer_from>> by `operator` from `from`, this function is called.

